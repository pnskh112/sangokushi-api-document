<!-- TOC -->

- [正規化normalization](#正規化normalization)
    - [正規形の定義](#正規形の定義)
        - [第一正規形](#第一正規形)
        - [第二正規形](#第二正規形)
        - [第三正規形](#第三正規形)

<!-- /TOC -->

## 正規化normalization
- 論理設計において、特に理解を深めておくべき概念が、「正規化（normalization）」及びそれによって作られる「正規形（normal form）」
- 実務での論理設計において本当に頭を悩ませることになるのは、一通りの正規化が「終わった後」である。

### 正規形の定義
- データベースで保持するデータの冗長性を排除し、一貫性と効率性を保持するためのデータ形式。
- 一つの情報が複数のテーブルに存在して無穴データ領域と面倒な更新処理を発生させてしまうことがある（冗長性）
- 冗長なデータ保持をしていると、更新処理のタイムラグによってデータの不整合が発生したり、<br>
そもそもデータを登録することができないようなテーブルを作ってしまうことがある（非一貫性）

#### 第一正規形
- 一つのセルに一つの値が含まれている状態

※ 非正規形の状態のテーブル

扶養者
<br>

| 社員ID | 社員名 | 子  |
|------|-----|----|
| 000A | 加藤  | 達夫 |
|      |     | 慎二 |
| 000B | 藤本  |    |
| 001F | 三島  | 淳  |
|      |     | 陽子 |
|      |     | 清美 |

第１正規形その１
<br>

| 社員ID | 社員名 | 子１ | 子２ | 子３ |
|------|-----|----|----|----|
| 000A | 加藤  | 達夫 | 慎二 |    |
| 000B | 藤本  |    |    |    |
| 001F | 三島  | 淳  | 陽子 | 清美 |

第１正規形その２
<br>

| 社員ID | 社員名 | 子  |
|------|-----|----|
| 000A | 加藤  | 達夫 |
| 000A | 加藤  | 慎二 |
| 000B | 藤本  |    |
| 001F | 三島  | 淳  |
| 001F | 三島  | 陽子 |
| 001F | 三島  | 清美 |
↑このテーブルの主キーは？

基本的にはその２を採用することが望ましい場合が多い。<br>
主キーは一部であってもNULLを含んではならない。

これらのテーブルには２つの問題がある
- 主キーを決められない
- このテーブルが意味的に「社員」と「扶養者」という２つのエンティティを含んでしまっている

第１正規形その３
社員

| 社員ID | 社員名 |
|------|-----|
| 000A | 加藤  |
| 000B | 藤本  |
| 001F | 三島  |

扶養者

| 社員ID | 子  |
|------|----|
| 000A | 達夫 |
| 000A | 慎二 |
| 001F | 淳  |
| 001F | 陽子 |
| 001F | 清美 |

※なぜ一つのセルに複数の値を入れてはダメなのか
- セルに複数の値を許せば、主キーが各列の値を一意に決定できないため
- スカラ値（特定の1行の特定の1列）だけのテーブルならば、主キーは、各列を一意に決めることができる

関数従属性（functional dependency）
X=5と定めれば、Y=10のように、Xに対してYが一つに決まる。これを「YはXに従属する」
と表現する。
「X列の値を決めれば、Y列の値が一つに決まる」という、数学の関数と同じことを意味する。


#### 第二正規形
TBD

#### 第三正規形
TBD